<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Nandha Chatbot Management System â€” Admin Panel</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
    * { box-sizing: border-box; }
    
    body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #0f172a, #1e293b, #0f172a);
        color: white;
        height: 100vh;
        display: flex;
        transition: all 0.3s;
    }
    
    /* Dark Mode */
    body.dark-mode {
        background: linear-gradient(135deg, #000000, #0f0f0f, #1a1a1a);
    }
    
    body.dark-mode .sidebar {
        background: rgba(0,0,0,0.5);
    }
    
    body.dark-mode .card {
        background: rgba(0,0,0,0.4);
    }

    /* Sidebar */
    .sidebar {
        width: 260px;
        background: rgba(255,255,255,0.07);
        backdrop-filter: blur(10px);
        padding: 20px;
        height: 100vh;
        border-right: 1px solid rgba(255,255,255,0.1);
        overflow-y: auto;
    }

    .sidebar h2 {
        font-size: 20px;
        text-align: center;
        margin-bottom: 30px;
        letter-spacing: 1px;
    }

    .menu a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 15px;
        margin-bottom: 10px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        text-decoration: none;
        color: #cbd5e1;
        transition: 0.3s;
        cursor: pointer;
    }

    .menu a:hover {
        background: rgba(255,255,255,0.15);
        transform: translateX(5px);
    }

    /* Main content */
    .content {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
    }

    .section {
        display: none;
        animation: fadeIn 0.4s ease-in;
    }

    .section.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .card {
        background: rgba(255,255,255,0.08);
        padding: 20px;
        border-radius: 15px;
        backdrop-filter: blur(12px);
        margin-bottom: 25px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    .card h3 {
        margin-top: 0;
        color: #93c5fd;
        font-size: 18px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        padding-bottom: 10px;
        margin-bottom: 15px;
    }

    input, select, textarea {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: none;
        margin: 8px 0;
        background: rgba(255,255,255,0.15);
        color: white;
        outline: none;
        font-family: inherit;
    }
    
    input::placeholder, textarea::placeholder {
        color: rgba(255,255,255,0.5);
    }

    button {
        padding: 12px 18px;
        background: #3b82f6;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        color: white;
        transition: 0.3s;
        margin: 5px;
    }

    button:hover {
        background: #60a5fa;
        transform: scale(1.05);
    }
    
    button:active {
        transform: scale(0.95);
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }

    th, td {
        padding: 12px;
        border-bottom: 1px solid rgba(255,255,255,0.15);
        text-align: left;
    }

    th {
        color: #93c5fd;
        font-weight: 600;
    }
    
    .stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }
    
    .stat-card {
        padding: 20px;
        border-radius: 10px;
        text-align: center;
    }
    
    .stat-card .number {
        font-size: 32px;
        font-weight: bold;
        margin-bottom: 5px;
    }
    
    .stat-card .label {
        font-size: 13px;
        opacity: 0.8;
    }
</style>
</head>

<body>

<!-- ================= SIDEBAR ================= -->
<div class="sidebar">
    <h2>ğŸ“ ADMIN PANEL</h2>

    <div class="menu">
        <a onclick="showSection('dashboard')"><i class="fa fa-home"></i> Dashboard</a>
        <a onclick="showSection('analytics')"><i class="fa fa-chart-pie"></i> Analytics</a>
        <a onclick="showSection('users')"><i class="fa fa-users"></i> User Management</a>
        <a onclick="showSection('lockControl')"><i class="fa fa-lock"></i> Lock/Unlock</a>
        <a onclick="showSection('warnings')"><i class="fa fa-triangle-exclamation"></i> Warnings</a>
        <a onclick="showSection('course')"><i class="fa fa-book"></i> Course Plans</a>
        <a onclick="showSection('notices')"><i class="fa fa-bell"></i> Notices</a>
        <a onclick="showSection('messaging')"><i class="fa fa-envelope"></i> Messages</a>
        <a onclick="showSection('appeals')"><i class="fa fa-inbox"></i> Student Appeals</a>
        <a onclick="showSection('redeemCodes')"><i class="fa fa-ticket"></i> Redeem Codes</a>
        <a onclick="showSection('featureControl')"><i class="fa fa-toggle-on"></i> Feature Control</a>
        <a onclick="showSection('debug')"><i class="fa fa-bug"></i> Debug & Test</a>
        <a onclick="showSection('hcCurrency')"><i class="fa fa-coins"></i> HC Currency</a>
        <a onclick="showSection('rewards')"><i class="fa fa-gift"></i> Rewards</a>
        <a onclick="showSection('audit')"><i class="fa fa-history"></i> Audit Logs</a>
        <a onclick="toggleDarkMode()"><i class="fa fa-moon"></i> Dark Mode</a>
        <a onclick="logout()"><i class="fa fa-right-from-bracket"></i> Logout</a>
    </div>
</div>

<!-- ================= MAIN CONTENT ================= -->
<div class="content">

    <!-- ============================================ -->
    <!-- 1. DASHBOARD -->
    <!-- ============================================ -->
    <div id="dashboard" class="section active">
        <h2>ğŸ‘‹ Welcome, Admin!</h2>
        <p style="opacity:0.8;">Manage your Smart Chatbot Management System from here.</p>
        
        <div class="stat-grid">
            <div class="stat-card" style="background:rgba(59,130,246,0.2);">
                <div class="number" id="totalStudents">â€”</div>
                <div class="label">Total Students</div>
            </div>
            <div class="stat-card" style="background:rgba(239,68,68,0.2);">
                <div class="number" id="lockedStudents">â€”</div>
                <div class="label">Locked Accounts</div>
            </div>
            <div class="stat-card" style="background:rgba(249,115,22,0.2);">
                <div class="number" id="warningStudents">â€”</div>
                <div class="label">With Warnings</div>
            </div>
            <div class="stat-card" style="background:rgba(34,197,94,0.2);">
                <div class="number" id="activeStudents">â€”</div>
                <div class="label">Active Today</div>
            </div>
        </div>
        
        <div class="card">
            <h3>Quick Actions</h3>
            <button onclick="showSection('lockControl')">ğŸ”’ Lock/Unlock Students</button>
            <button onclick="showSection('warnings')">âš ï¸ Issue Warning</button>
            <button onclick="showSection('notices')">ğŸ“¢ Create Notice</button>
            <button onclick="showSection('messaging')">ğŸ’¬ Send Message</button>
            <button onclick="showSection('course')">ğŸ“˜ Upload Course Plan</button>
        </div>
    </div>

        <!-- ============================================ -->
        <!-- 8b. STUDENT APPEALS -->
        <!-- ============================================ -->
        <div id="appeals" class="section">
                <h2>ğŸ“¨ Student Appeals & Messages</h2>
                <div class="card">
                        <h3>Inbox</h3>
                        <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px;flex-wrap:wrap;">
                            <button onclick="loadAppeals()">ğŸ”„ Refresh</button>
                            <select id="appealsFilter" onchange="loadAppeals()" style="max-width:240px;">
                                <option value="">All</option>
                                <option value="pending">Pending</option>
                                <option value="responded">Responded</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        <div id="appealsContainer"><p style="opacity:0.6;">Loading appeals...</p></div>
                </div>
        
        <!-- 8c. REDEEM CODES MANAGEMENT -->
        <div id="redeemCodes" class="section">
            <h2>ğŸŸï¸ Redeem Codes</h2>
            <div class="card">
                <h3>Generate Code</h3>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;">
                    <div>
                        <label>Reward Type</label>
                        <select id="redeemRewardType">
                            <option value="hc">HC (Energy)</option>
                            <option value="cosmetic">Cosmetic</option>
                            <option value="badge">Badge</option>
                        </select>
                    </div>
                    <div>
                        <label>Value (for cosmetic/badge)</label>
                        <input id="redeemValue" placeholder="e.g., virtualPets:dragon-pet or badge-name" />
                    </div>
                    <div>
                        <label>Amount (for HC)</label>
                        <input id="redeemAmount" type="number" min="0" placeholder="e.g., 100" />
                    </div>
                    <div>
                        <label>Permanent</label>
                        <select id="redeemPermanent">
                            <option value="true">Yes</option>
                            <option value="false" selected>No</option>
                        </select>
                    </div>
                    <div>
                        <label>Expires in Minutes</label>
                        <input id="redeemExpiresMinutes" type="number" min="0" placeholder="e.g., 60" />
                    </div>
                    <div>
                        <label>Expires in Days</label>
                        <input id="redeemExpiresDays" type="number" min="0" placeholder="e.g., 1" />
                    </div>
                    <div>
                        <label>Max Uses</label>
                        <input id="redeemMaxUses" type="number" min="1" placeholder="e.g., 100" />
                    </div>
                </div>
                <textarea id="redeemDescription" placeholder="Optional description"></textarea>
                <div style="display:flex;justify-content:flex-end;gap:10px;">
                    <button onclick="generateRedeemCode()">Generate Code</button>
                    <button onclick="loadRedeemCodes()" style="background:#64748b;">Refresh</button>
                </div>
            </div>
            <div class="card">
                <h3>Existing Codes</h3>
                <div id="redeemCodesContainer"><p style="opacity:0.6;">Loading codes...</p></div>
            </div>
        </div>
        
        <!-- 8d. FEATURE CONTROL -->
        <div id="featureControl" class="section">
            <h2>ğŸ›ï¸ Feature Control</h2>
            <p style="opacity:0.8;">Enable or disable features for all students. System messages are sent automatically.</p>
            <div class="card">
                <h3>Student Features</h3>
                <div id="featureTogglesContainer" style="display:grid;gap:15px;">
                    <p style="opacity:0.6;">Loading feature states...</p>
                </div>
            </div>
        </div>
        
        <!-- 8e. DEBUG & TEST -->
        <div id="debug" class="section">
            <h2>ğŸ› Debug & Test</h2>
            <div class="card">
                <h3>Redeem Codes</h3>
                <button onclick="testRedeemCodeAPI()">Test API Connection</button>
                <button onclick="window.loadRedeemCodes()">Manual Load</button>
                <button onclick="checkRedeemContainer()">Check Container</button>
                <div id="debugRedeemOutput" style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;font-family:monospace;font-size:12px;max-height:200px;overflow-y:auto;"></div>
            </div>
            <div class="card">
                <h3>Appeals/Messages</h3>
                <button onclick="testAppealsAPI()">Test API Connection</button>
                <button onclick="window.loadAppeals()">Manual Load</button>
                <button onclick="checkAppealsContainer()">Check Container</button>
                <div id="debugAppealsOutput" style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;font-family:monospace;font-size:12px;max-height:200px;overflow-y:auto;"></div>
            </div>
            <div class="card">
                <h3>System Info</h3>
                <button onclick="checkCSRFToken()">Check CSRF Token</button>
                <button onclick="checkAuthToken()">Check Auth Token</button>
                <div id="debugSystemOutput" style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;font-family:monospace;font-size:12px;max-height:200px;overflow-y:auto;"></div>
            </div>
        </div>
        </div>

    <!-- ============================================ -->
    <!-- 2. ANALYTICS -->
    <!-- ============================================ -->
    <div id="analytics" class="section">
        <h2>ğŸ“Š Analytics Dashboard</h2>
        <div class="card">
            <h3>System Statistics</h3>
            <div class="stat-grid">
                <div class="stat-card" style="background:rgba(59,130,246,0.2);">
                    <div class="number" id="totalStudents2">â€”</div>
                    <div class="label">Total Students</div>
                </div>
                <div class="stat-card" style="background:rgba(34,197,94,0.2);">
                    <div class="number" id="activeToday">â€”</div>
                    <div class="label">Active Today</div>
                </div>
                <div class="stat-card" style="background:rgba(239,68,68,0.2);">
                    <div class="number" id="lockedCount">â€”</div>
                    <div class="label">Locked Accounts</div>
                </div>
                <div class="stat-card" style="background:rgba(249,115,22,0.2);">
                    <div class="number" id="warnedCount">â€”</div>
                    <div class="label">With Warnings</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 3. USER MANAGEMENT -->
    <!-- ============================================ -->
    <div id="users" class="section">
        <h2>ğŸ‘¥ User Management</h2>

        <div class="card">
            <h3>All Students</h3>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
              <input type="text" id="userSearchInput" placeholder="Search by name or roll..." onkeyup="filterUsers()" style="flex:1;min-width:240px;">
              <button onclick="exportStudentData()">ğŸ“¥ Export CSV</button>
            </div>
            <div style="overflow-x:auto;">
                <table id="usersTable">
                    <thead>
                        <tr><th>Roll</th><th>Name</th><th>Dept</th><th>Class</th><th>Status</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="6" style="text-align:center;opacity:0.6;">Loading students...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 4. LOCK/UNLOCK CONTROL -->
    <!-- ============================================ -->
    <div id="lockControl" class="section">
        <h2>ğŸ”’ Lock & Unlock Students</h2>

        <div class="card">
            <h3>Lock/Unlock Specific Student</h3>
            <input type="text" id="studentLock" placeholder="Enter student roll number (e.g., 2023CS001)">
            <input type="number" id="lockSeconds" placeholder="Lock duration in seconds (default: 86400 = 1 day)" value="86400">
            <div style="margin-top:15px;">
                <button onclick="lockStudent()" style="background:#ef4444;">ğŸ”’ Lock Student</button>
                <button onclick="unlockStudent()" style="background:#22c55e;">ğŸ”“ Unlock Student</button>
            </div>
            <p style="font-size:12px;opacity:0.7;margin-top:10px;">
                ğŸ’¡ Tip: Use the "Select" button in User Management table to auto-fill roll number
            </p>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 5. WARNINGS -->
    <!-- ============================================ -->
    <div id="warnings" class="section">
        <h2>âš ï¸ Issue Warnings & Violations</h2>

        <div class="card">
            <h3>Issue Warning</h3>
            <input type="text" id="studentWarning" placeholder="Enter student roll number">
            <select id="warningLevel">
                <option value="low">âš ï¸ Low - Minor violation</option>
                <option value="medium">âš ï¸ Medium - Moderate violation</option>
                <option value="high">ğŸš¨ High - Serious violation</option>
            </select>
            <textarea id="warningReason" placeholder="Reason for warning..." style="min-height:100px;"></textarea>
            <button onclick="issueWarning()" style="background:#f59e0b;">âš ï¸ Issue Warning</button>
        </div>

        <div class="card">
            <h3>View Student Warnings</h3>
            <input type="text" id="warningsViewRoll" placeholder="Enter roll number">
            <button onclick="loadWarnings(document.getElementById('warningsViewRoll').value)">Load Warnings</button>
            <div id="warningsContainer" style="margin-top:15px;">
                <p style="opacity:0.6;">Enter a roll number above to view warnings</p>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 6. COURSE PLANS -->
    <!-- ============================================ -->
    <div id="course" class="section">
        <h2>ğŸ“˜ Course Plan Management</h2>

        <div class="card">
            <h3>Upload Course Plan (PDF)</h3>
            <p id="coursePlanStatus" style="opacity:0.8;margin-top:0;">PDF uploads enabled</p>
            <input type="text" id="planName" placeholder="Optional: Plan name (auto-detected from filename)">
            <input type="file" id="planFile" accept="application/pdf" style="padding:20px;background:rgba(255,255,255,0.1);border:2px dashed rgba(255,255,255,0.3);">
            <button id="planBtn" onclick="uploadCoursePlan()">ğŸ“¤ Upload PDF</button>
            <button id="toggleCoursePlanBtn" onclick="toggleCoursePlanUpload()" style="background:#f97316;">Disable PDF Uploads</button>
        </div>

        <div class="card">
            <h3>Prompt Topics (when PDF disabled)</h3>
            <p style="opacity:0.8">When PDF uploads are disabled, chatbot answers only from these topics.</p>
            <textarea id="promptTopics" placeholder="Enter topics or summary for chatbot" style="min-height:140px;"></textarea>
            <button onclick="savePromptTopics()">ğŸ’¾ Save Topics</button>
        </div>

        <div class="card">
            <h3>Uploaded Course Plans</h3>
            <div style="overflow-x:auto;">
                <table id="plansTable">
                    <thead>
                        <tr><th>File Name</th><th>Uploaded</th><th>Action</th></tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="3" style="text-align:center;opacity:0.6;">No course plans uploaded yet</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 7. NOTICES -->
    <!-- ============================================ -->
    <div id="notices" class="section">
        <h2>ğŸ“¢ Notices & Announcements</h2>
        
        <div class="card">
            <h3>Create New Notice</h3>
            <input type="text" id="noticeTitle" placeholder="Notice Title">
            <textarea id="noticeBody" placeholder="Notice Body" style="min-height:120px;"></textarea>
            <label style="display:flex;align-items:center;gap:8px;margin:10px 0;cursor:pointer;">
                <input type="checkbox" id="noticeUrgent" style="width:auto;margin:0;">
                <span>ğŸ”´ Mark as Urgent/Pin to top</span>
            </label>
            <button onclick="createNotice()">ğŸ“¢ Send Notice</button>
        </div>
        
        <div class="card">
            <h3>Recent Notices</h3>
            <div id="noticesContainer" style="max-height:400px;overflow-y:auto;">
                <p style="opacity:0.6;">Loading notices...</p>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 8. DIRECT MESSAGES -->
    <!-- ============================================ -->
    <div id="messaging" class="section">
        <h2>ğŸ’¬ System Messages</h2>
        
        <div class="card">
            <h3>Send Direct Message</h3>
            <input type="text" id="msgTitle" placeholder="Message Title">
            <textarea id="msgContent" placeholder="Message Content" style="min-height:120px;"></textarea>
            <select id="msgType">
                <option value="info">â„¹ï¸ Info</option>
                <option value="warning">âš ï¸ Warning</option>
                <option value="alert">ğŸš¨ Alert</option>
                <option value="success">âœ… Success</option>
            </select>
            <input type="text" id="msgRecipients" placeholder="Recipient roll numbers (comma separated: 2023CS001, 2023CS002)">
            <button onclick="sendDirectMessage()">ğŸ“¨ Send Message</button>
        </div>
        
        <div class="card">
            <h3>Broadcast Message to All</h3>
            <select id="broadcastFilter">
                <option value="all">ğŸ“¢ Send to All Students</option>
                <option value="dept">By Department</option>
                <option value="locked">Only Locked Accounts</option>
            </select>
            <input type="text" id="broadcastTitle" placeholder="Broadcast Title">
            <textarea id="broadcastContent" placeholder="Broadcast Content" style="min-height:100px;"></textarea>
            <button onclick="broadcastMessage()">ğŸ“¡ Send Broadcast</button>
        </div>

        <div class="card">
            <h3>Message Templates</h3>
            <select id="templateSelect"><option value="">-- Select Template --</option></select>
            <button onclick="loadTemplate()">Load</button>
            <button onclick="createTemplate()">â• Create New Template</button>
            <hr style="border-color:rgba(255,255,255,0.1);margin:15px 0;">
            <div style="margin-top:10px;">
                <input type="text" id="templateTitle" placeholder="Template title">
                <textarea id="templateBody" placeholder="Template body" style="min-height:80px;"></textarea>
                <select id="templateType">
                    <option value="info">Info</option>
                    <option value="warning">Warning</option>
                    <option value="reward">Reward</option>
                </select>
            </div>
            <div id="templateList" style="max-height:200px;overflow-y:auto;margin-top:15px;"></div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 9. REWARDS SYSTEM -->
    <!-- ============================================ -->
    <div id="hcCurrency" class="section">
        <h2>ğŸ’° HC Currency Management</h2>
        
        <div class="card" style="background:linear-gradient(135deg, rgba(34,211,238,0.15), rgba(6,182,212,0.1)); border-left:4px solid #22d3ee;">
            <h3>ğŸ Grant HC to Individual Student</h3>
            <p style="opacity:0.85;margin-bottom:12px;">Add HC currency to a specific student's account. They can use it to purchase cosmetics from the shop.</p>
            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;">
                <input type="text" id="hcRecipient" placeholder="Student roll number" style="flex:1;min-width:200px;">
                <input type="number" id="hcAmount" placeholder="Amount (e.g., 1000)" min="1" style="width:150px;">
                <button onclick="grantHCToStudent()" style="background:#22d3ee;color:#000;">ğŸ’° Grant HC</button>
            </div>
            <p id="hcGrantStatus" style="font-size:12px;margin-top:8px;opacity:0.8;"></p>
        </div>

        <div class="card" style="background:linear-gradient(135deg, rgba(168,85,247,0.15), rgba(139,92,246,0.1)); border-left:4px solid #a78bfa;">
            <h3>ğŸ“¢ Broadcast HC to All Students</h3>
            <p style="opacity:0.85;margin-bottom:12px;">Send the same amount of HC to all students at once. Perfect for special events or promotions!</p>
            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;">
                <input type="number" id="broadcastHCAmount" placeholder="Amount per student (e.g., 500)" min="1" style="flex:1;min-width:200px;">
                <button onclick="broadcastHCToAll()" style="background:#a78bfa;">ğŸ“¢ Broadcast HC</button>
            </div>
            <p id="broadcastStatus" style="font-size:12px;margin-top:8px;opacity:0.8;"></p>
        </div>

        <div class="card" style="background:rgba(255,255,255,0.05);">
            <h3>â„¹ï¸ HC Currency Info</h3>
            <ul style="opacity:0.85;margin:8px 0;">
                <li>HC is used in the cosmetic shop for premium purchases</li>
                <li>Students can purchase SUPREME tier cosmetics with HC</li>
                <li>Each virtual pet costs 9999 HC to purchase in the shop</li>
                <li>Admins can grant any amount of HC at any time</li>
                <li>HC balances are permanent and don't expire</li>
            </ul>
        </div>
    </div>

    <!-- 9. REWARDS SYSTEM -->
    <div id="rewards" class="section">
        <h2>ğŸ Rewards & Achievements</h2>
        
        <div class="card" style="background:#fef3c7;border-left:4px solid #f59e0b;">
            <h3>âš™ï¸ Database Migration</h3>
            <p style="margin-bottom:10px;">
                <strong>Important:</strong> Run this once to initialize cosmetics storage for all existing students in MongoDB.
            </p>
            <button onclick="migrateSettings()" style="background:#f59e0b;">
                ğŸ”„ Initialize Cosmetics Schema for All Students
            </button>
            <p id="migrationStatus" style="font-size:12px;margin-top:8px;opacity:0.8;"></p>
        </div>

        <div class="card" style="background:#eef2ff;border-left:4px solid #4f46e5;">
            <h3>ğŸ§ª Debug Student Storage</h3>
            <p style="margin-bottom:10px;">
                Enter the student's roll above (Reward Recipient), then run debug to inspect cosmetics and unlocked arrays.
            </p>
            <div style="display:flex;gap:8px;align-items:center;">
              <button onclick="debugStudentSettings()" style="background:#4f46e5;">ğŸ” Run Debug</button>
              <button onclick="document.getElementById('debugOutput').textContent='';" style="background:#64748b;">ğŸ§¹ Clear</button>
            </div>
            <pre id="debugOutput" style="margin-top:10px;padding:10px;background:#fff;border:1px solid #e5e7eb;overflow:auto;max-height:220px;white-space:pre-wrap;color:#000;"></pre>
        </div>
        
        <div class="card">
            <h3>Send Reward/Achievement</h3>
            <input type="text" id="rewardRecipient" placeholder="Student roll number">
            <input type="text" id="rewardTitle" placeholder="Reward Title (e.g., Top Performer, Perfect Attendance)">
            <textarea id="rewardContent" placeholder="Reward description and congratulations message" style="min-height:100px;"></textarea>
            <input type="number" id="rewardPoints" placeholder="Reward Points (optional, e.g., 100)" min="0">
            <button onclick="sendReward()" style="background:#8b5cf6;">ğŸ† Send Reward</button>
            <p style="font-size:12px;opacity:0.7;margin-top:10px;">
                Rewards appear in student mailbox with special ğŸ icon
            </p>
            <div style="margin-top:12px;display:flex;flex-wrap:wrap;gap:8px;">
              <button onclick="document.getElementById('rewardTitle').value='Top Performer';document.getElementById('rewardContent').value='Outstanding performance this term!';document.getElementById('rewardPoints').value=100;">â­ Top Performer</button>
              <button onclick="document.getElementById('rewardTitle').value='Perfect Attendance';document.getElementById('rewardContent').value='Perfect attendance record. Keep it up!';document.getElementById('rewardPoints').value=50;">ğŸ“… Perfect Attendance</button>
              <button onclick="document.getElementById('rewardTitle').value='Outstanding Project';document.getElementById('rewardContent').value='Excellent project delivery and documentation.';document.getElementById('rewardPoints').value=75;">ğŸ§ª Outstanding Project</button>
              <button onclick="document.getElementById('rewardTitle').value='Peer Helper';document.getElementById('rewardContent').value='Recognized for helping peers consistently.';document.getElementById('rewardPoints').value=30;">ğŸ¤ Peer Helper</button>
            </div>
        </div>

                <div class="card">
                    <h3>Cosmetic Rewards</h3>
                    <p style="opacity:0.85">Grant visual upgrades that personalize the student's dashboard and chat.</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('avatarBorder','glow-blue')">Avatar Border: Glow Blue</button>
                        <button onclick="grantCosmetic('avatarBorder','gold')">Avatar Border: Gold</button>
                        <button onclick="grantCosmetic('avatarBorder','neon-pink')">Avatar Border: Neon Pink</button>
                        <button onclick="grantCosmetic('nameStyle','gradient-gold')">Name Style: Gradient Gold</button>
                        <button onclick="grantCosmetic('nameStyle','neon')">Name Style: Neon</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#4f46e5')">Chat Color: Indigo</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#10b981')">Chat Color: Green</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#f59e0b')">Chat Color: Amber</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1503264116251-35a269479413?q=80&w=1600&auto=format&fit=crop')">Profile Background: Aurora</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1470770903676-69b98201ea1c?q=80&w=1600&auto=format&fit=crop')">Profile Background: Nebula</button>
                        <button onclick="grantCosmetic('badge','â­ Star Student')">Badge: â­ Star Student</button>
                        <button onclick="grantCosmetic('badge','ğŸ† Top Performer')">Badge: ğŸ† Top Performer</button>
                    </div>

                    <h3 style="margin-top:20px;">âœ¨ Animated Effects</h3>
                    <p style="opacity:0.85">Premium animated cosmetics with wow factor!</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('animatedNameEffect','rainbow-wave')">âœ¨ Rainbow Wave Name</button>
                        <button onclick="grantCosmetic('animatedNameEffect','shimmer')">ğŸ’« Shimmer Name</button>
                        <button onclick="grantCosmetic('animatedBorder','pulse-glow')">ğŸŒŸ Pulsing Glow Avatar</button>
                        <button onclick="grantCosmetic('animatedBorder','rainbow-spin')">ğŸ¨ Rainbow Spin Avatar</button>
                        <button onclick="grantCosmetic('titleEffect','crown')">ğŸ‘‘ Crown Title Effect</button>
                        <button onclick="grantCosmetic('titleEffect','halo')">â­ Halo Title Effect</button>
                    </div>

                    <h3 style="margin-top:16px;">ğŸ’ Legendary & Eternal</h3>
                    <p style="opacity:0.85">High-tier cosmetics with rare effects</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('animatedNameEffect','phoenix-blaze')">ğŸ”¥ Phoenix Blaze (Legendary Name)</button>
                        <button onclick="grantCosmetic('animatedNameEffect','void-pulse')">ğŸŒ€ Void Pulse (Eternal Name)</button>
                        <button onclick="grantCosmetic('animatedBorder','lightning-strike')">âš¡ Lightning Strike (Legendary Border)</button>
                        <button onclick="grantCosmetic('animatedBorder','quantum-field')">âš›ï¸ Quantum Field (Eternal Border)</button>
                        <button onclick="grantCosmetic('titleEffect','emperor-crown')">ğŸ‘‘âœ¨ Emperor Crown (Legendary Title)</button>
                        <button onclick="grantCosmetic('titleEffect','god-mode')">â˜€ï¸ God Mode (Eternal Title)</button>
                        <button onclick="grantCosmetic('avatarBorder','dragon-fire')">ğŸ‰ Dragon Fire (Legendary Border)</button>
                        <button onclick="grantCosmetic('avatarBorder','celestial-aura')">ğŸŒŒ Celestial Aura (Eternal Border)</button>
                        <button onclick="grantCosmetic('nameStyle','diamond-shine')">ğŸ’ Diamond Shine (Legendary Name)</button>
                        <button onclick="grantCosmetic('nameStyle','cosmic-energy')">ğŸŒ  Cosmic Energy (Eternal Name)</button>
                        <button onclick="grantCosmetic('chatColor','#fbbf24')">ğŸ¨ Legendary Gold Chat</button>
                        <button onclick="grantCosmetic('chatColor','#a78bfa')">ğŸ¨ Eternal Purple Chat</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?q=80&w=1200')">ğŸŒŒ Starfield (Legendary BG)</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1200')">ğŸª Cosmic Realm (Eternal BG)</button>
                    </div>

                    <h3 style="margin-top:20px;">ğŸ”¥ LEGENDARY Tier</h3>
                    <p style="opacity:0.85;color:#fbbf24;">Ultra-rare legendary cosmetics!</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('avatarBorder','dragon-fire')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">ğŸ”¥ Dragon Fire Border</button>
                        <button onclick="grantCosmetic('nameStyle','diamond-shine')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">ğŸ’ Diamond Shine Name</button>
                        <button onclick="grantCosmetic('animatedNameEffect','phoenix-blaze')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">ğŸ”¥ Phoenix Blaze</button>
                        <button onclick="grantCosmetic('animatedBorder','lightning-strike')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">âš¡ Lightning Strike</button>
                        <button onclick="grantCosmetic('titleEffect','emperor-crown')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">ğŸ‘‘âœ¨ Emperor Crown</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#fbbf24')" style="background:linear-gradient(135deg,#fbbf24,#f59e0b);">ğŸŸ¡ Legendary Gold Chat</button>
                    </div>

                    <h3 style="margin-top:20px;">âš¡ ETERNAL Tier</h3>
                    <p style="opacity:0.85;color:#a78bfa;">Mythical eternal cosmetics with divine power!</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('avatarBorder','celestial-aura')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">â­ Celestial Aura</button>
                        <button onclick="grantCosmetic('nameStyle','cosmic-energy')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">ğŸŒŒ Cosmic Energy</button>
                        <button onclick="grantCosmetic('animatedNameEffect','void-pulse')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">ğŸŒ€ Void Pulse</button>
                        <button onclick="grantCosmetic('animatedBorder','quantum-field')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">âš›ï¸ Quantum Field</button>
                        <button onclick="grantCosmetic('titleEffect','god-mode')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">â˜€ï¸ God Mode</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#a78bfa')" style="background:linear-gradient(135deg,#a78bfa,#8b5cf6);box-shadow:0 0 15px rgba(167,139,250,0.5);">ğŸŸ£ Eternal Purple Chat</button>
                    </div>

                    <h3 style="margin-top:20px;">ğŸ–ï¸ Verified Badge</h3>
                    <p style="opacity:0.85">Mark student as verified with a prestigious badge on their profile.</p>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantVerifiedBadge()" style="background:#059669;">ğŸ–ï¸ Grant Verified Badge</button>
                        <button onclick="removeVerifiedBadge(document.getElementById('rewardRecipient')?.value)" style="background:#dc2626;">âŒ Remove Verified Badge</button>
                    </div>

                    <h3 style="margin-top:24px;font-size:18px;">ğŸŒŠ MYTHIC Tier (Superior to Legendary & Eternal)</h3>
                    <p style="opacity:0.9;color:#22d3ee;font-weight:600;">Enhanced power with superior animations and multiple effects!</p>
                    
                    <h4 style="margin-top:12px;color:#22d3ee;">âœ¨ Mythic Avatar Borders</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('avatarBorder','starlight-veil')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âœ¨ Starlight Veil</button>
                        <button onclick="grantCosmetic('avatarBorder','azure-phoenix')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ¦â€ğŸ”¥ Azure Phoenix</button>
                        <button onclick="grantCosmetic('avatarBorder','crystal-fortress')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’ Crystal Fortress</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#22d3ee;">âœ¨ Mythic Name Styles</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('nameStyle','starlight-flare')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âœ¨ Starlight Flare</button>
                        <button onclick="grantCosmetic('nameStyle','plasma-core')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âš¡ Plasma Core</button>
                        <button onclick="grantCosmetic('nameStyle','crystal-radiance')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’ Crystal Radiance</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#22d3ee;">âœ¨ Mythic Animated Effects</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('animatedNameEffect','stardust-flow')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸª Stardust Flow</button>
                        <button onclick="grantCosmetic('animatedNameEffect','cosmic-storm')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âš¡ğŸŒŒ Cosmic Storm</button>
                        <button onclick="grantCosmetic('animatedNameEffect','crystal-cascade')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’ Crystal Cascade</button>
                        <button onclick="grantCosmetic('animatedBorder','nebula-surge')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸŒŒ Nebula Surge</button>
                        <button onclick="grantCosmetic('animatedBorder','plasma-ring')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âš¡ğŸ’« Plasma Ring</button>
                        <button onclick="grantCosmetic('animatedBorder','crystal-orbit')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’ Crystal Orbit</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#22d3ee;">âœ¨ Mythic Title Effects & Colors</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('titleEffect','sacred-sigil')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ”± Sacred Sigil</button>
                        <button onclick="grantCosmetic('titleEffect','titan-helm')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">âš”ï¸ Titan Helm</button>
                        <button onclick="grantCosmetic('titleEffect','oracle-vision')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ‘ï¸ Oracle Vision</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#22d3ee')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’¬ Mythic Cyan</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#06b6d4')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’¬ Mythic Teal</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#0891b2')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ’¬ Mythic Deep Cyan</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#22d3ee;">âœ¨ Mythic Backgrounds</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=1200')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ–¼ï¸ Mythic Horizon</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1464802686167-b939a6910659?q=80&w=1200')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ–¼ï¸ Mythic Storm</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=1200')" style="background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 0 15px rgba(34,211,238,0.5);">ğŸ–¼ï¸ Mythic Peaks</button>
                    </div>

                    <h3 style="margin-top:30px;font-size:20px;">ğŸŒŒ TRANSCENDENT Tier (Ultimate Highest Tier)</h3>
                    <p style="opacity:1;color:#7c3aed;font-weight:700;font-size:15px;">THE ULTIMATE TIER - Reality-bending powers with the most impressive effects!</p>
                    
                    <h4 style="margin-top:12px;color:#7c3aed;">ğŸŒŒ Transcendent Avatar Borders</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('avatarBorder','prismatic-shield')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒˆ Prismatic Shield</button>
                        <button onclick="grantCosmetic('avatarBorder','eternal-flames')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ”¥ğŸ’« Eternal Flames</button>
                        <button onclick="grantCosmetic('avatarBorder','void-emperor')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ‘‘ğŸŒŒ Void Emperor</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#7c3aed;">ğŸŒŒ Transcendent Name Styles</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('nameStyle','aurora-burst')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒŒ Aurora Burst</button>
                        <button onclick="grantCosmetic('nameStyle','divine-script')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">âœ¨â˜€ï¸ Divine Script</button>
                        <button onclick="grantCosmetic('nameStyle','reality-bender')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒ€ğŸ’« Reality Bender</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#7c3aed;">ğŸŒŒ Transcendent Animated Effects</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('animatedNameEffect','time-warp')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">â³ Time Warp</button>
                        <button onclick="grantCosmetic('animatedNameEffect','dimension-rift')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒ€âœ¨ Dimension Rift</button>
                        <button onclick="grantCosmetic('animatedNameEffect','infinity-spiral')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">â™¾ï¸ Infinity Spiral</button>
                        <button onclick="grantCosmetic('animatedBorder','singularity')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ•³ï¸ Singularity</button>
                        <button onclick="grantCosmetic('animatedBorder','supernova')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ’¥ğŸŒŸ Supernova</button>
                        <button onclick="grantCosmetic('animatedBorder','universe-edge')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒŒâœ¨ Universe Edge</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#7c3aed;">ğŸŒŒ Transcendent Title Effects & Colors</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('titleEffect','celestial-ring')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸª Celestial Ring</button>
                        <button onclick="grantCosmetic('titleEffect','omniscient')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">âœ¨ğŸ‘ï¸âœ¨ Omniscient</button>
                        <button onclick="grantCosmetic('titleEffect','reality-weaver')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸŒ€ğŸ’« Reality Weaver</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#7c3aed')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ’¬ Transcendent Violet</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#5b21b6')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ’¬ Deep Purple</button>
                        <button onclick="grantCosmetic('chatBubbleColor','#4c1d95')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ’¬ Ultra Violet</button>
                    </div>
                    
                    <h4 style="margin-top:12px;color:#7c3aed;">ğŸŒŒ Transcendent Backgrounds</h4>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;">
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=1200')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ–¼ï¸ Transcendent Cosmos</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1484589065579-248aad0d8b13?q=80&w=1200')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ–¼ï¸ Transcendent Void</button>
                        <button onclick="grantCosmetic('backgroundUrl','https://images.unsplash.com/photo-1545243424-0ce743321e11?q=80&w=1200')" style="background:linear-gradient(135deg,#7c3aed,#5b21b6);box-shadow:0 0 25px rgba(124,58,237,0.7);font-weight:700;">ğŸ–¼ï¸ Transcendent Dimension</button>
                    </div>
                </div>
    </div>

    <!-- ============================================ -->
    <!-- 10. AUDIT LOGS -->
    <!-- ============================================ -->
    <div id="audit" class="section">
        <h2>ğŸ“‹ Audit Logs</h2>
        <div class="card">
            <h3>Admin Activity History</h3>
            <div style="max-height:500px;overflow-y:auto;border-radius:8px;background:rgba(0,0,0,0.2);padding:15px;">
                <div id="auditLogs" style="font-size:13px;opacity:0.8;">
                    <p>Audit logs feature coming soon...</p>
                    <p style="opacity:0.6;">This will track all admin actions including:</p>
                    <ul style="opacity:0.6;">
                        <li>Student locks/unlocks</li>
                        <li>Warnings issued</li>
                        <li>Messages sent</li>
                        <li>Course plan uploads</li>
                        <li>System changes</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ============================================ -->
<!-- MODALS -->
<!-- ============================================ -->

<!-- QR Code Modal -->
<div id="qrModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:9999;align-items:center;justify-content:center;">
    <div style="background:#1e293b;padding:30px;border-radius:15px;text-align:center;max-width:400px;box-shadow:0 25px 50px rgba(0,0,0,0.5);">
        <h3 style="margin-top:0;color:#93c5fd;">Student QR Code</h3>
        <div id="qrCodeContainer" style="margin:20px auto;background:white;padding:20px;border-radius:10px;display:inline-block;"></div>
        <p id="qrStudentInfo" style="font-size:14px;margin:15px 0;color:#cbd5e1;"></p>
        <button onclick="closeQRModal()" style="margin-top:15px;">âœ–ï¸ Close</button>
    </div>
</div>

<!-- Student Detail Modal -->
<div id="studentDetailModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:9999;align-items:center;justify-content:center;overflow-y:auto;padding:20px;">
    <div style="background:#1e293b;padding:30px;border-radius:15px;max-width:900px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px rgba(0,0,0,0.5);">
        <h3 id="detailStudentName" style="margin-top:0;color:#93c5fd;border-bottom:2px solid rgba(255,255,255,0.1);padding-bottom:10px;">Student Details</h3>
        
        <div id="detailStudentInfo" style="margin:20px 0;">
            <p style="opacity:0.6;">Loading student information...</p>
        </div>
        
        <div style="margin:25px 0;">
            <h4 style="color:#93c5fd;border-bottom:1px solid rgba(255,255,255,0.1);padding-bottom:8px;">ğŸ’¬ Chat History (Last 50 messages)</h4>
            <div id="detailChatHistory" style="max-height:350px;overflow-y:auto;background:rgba(0,0,0,0.3);padding:15px;border-radius:10px;margin-top:10px;">
                <p style="opacity:0.6;">Loading chat history...</p>
            </div>
        </div>
        
        <div style="margin:25px 0;">
            <h4 style="color:#93c5fd;border-bottom:1px solid rgba(255,255,255,0.1);padding-bottom:8px;">âš ï¸ Warnings & Violations</h4>
            <div id="detailWarnings" style="margin-top:10px;"></div>
        </div>
        
        <button onclick="closeStudentDetailModal()" style="margin-top:20px;width:100%;">âœ–ï¸ Close</button>
    </div>
</div>

<!-- ============================================ -->
<!-- SCRIPTS -->
<!-- ============================================ -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="admin.js"></script>

</body>
</html>
